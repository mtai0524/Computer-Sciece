@using Microsoft.AspNetCore.Identity
@inject UserManager<ApplicationUser> UserManager
@inject SignInManager<ApplicationUser> SignInManager
@{
    var isAuthenticated = User.Identity.IsAuthenticated;
    var avatarUrl = isAuthenticated ? (await UserManager.GetUserAsync(User))?.Avatar : "https://i.pinimg.com/236x/e1/6c/70/e16c704fc0b655e553dd7a1a8a00475d.jpg";
}
<!doctype html>
<html class="no-js" lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Quản lý nhà hàng tiệc cưới</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link href="~/admin_assets/css/stylesheet.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/css/mydesign.css" asp-append-version="true" />
    <link href="_content/MudBlazor/MudBlazor.min.css" rel="stylesheet" />

    <link rel="stylesheet" href="~/admin_assets/css/my-task.style.min.css">
    <link href="~/css/site.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <base href="~/" />
    <component type="typeof(Microsoft.AspNetCore.Components.Web.HeadOutlet)"
               render-mode="ServerPrerendered" />
    <style>
        .loading-spinner {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .spinner-image {
            width: 190px;
            height: 150px;
        }



        .height {
            height: 100vh;
        }

        .form {
            position: relative;
        }

            .form .fa-search {
                position: absolute;
                top: 20px;
                left: 20px;
                color: #9ca3af;
            }

            .form span {
                position: absolute;
                right: 17px;
                top: 13px;
                padding: 2px;
                border-left: 1px solid #d1d5db;
            }

        .left-pan {
            padding-left: 7px;
        }

            .left-pan i {
                padding-left: 10px;
            }

        .form-input {
            height: 55px;
            text-indent: 33px;
            border-radius: 10px;
        }

            .form-input:focus {
                box-shadow: none;
                border: none;
            }

        .custom-modal {
            display: none;
            position: fixed;
            z-index: 1;
            right: -50rem; /* Hiển thị phía bên phải */
            top: 0; /* Hiển thị phía dưới */
            width: 100%; /* Độ rộng của modal box */
            height: 1000%; /* Chiều cao của modal box */
            overflow: auto;
        }

        .modal-content {
            width:100px;
            background-color: #fefefe;
            border: 1px solid #888;
            position: relative;
        }

        .close {
            color: #aaaaaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

            .close:hover,
            .close:focus {
                color: #000;
                text-decoration: none;
                cursor: pointer;
            }


    </style>
</head>

<body>
    <div id="mytask-layout" class="theme-indigo">
        <div class="loading-spinner" id="loading-spinner">
            <img src="~/admin_assets/images/cf.gif" class="spinner-image" alt="Loading..." />
        </div>
        @await Html.PartialAsync("_SideBarPartialView.cshtml")

        <!-- main body area -->
        <div class="main px-lg-4 px-md-4">
            <div class="container">
                <div class="row">
                    <div id="customModal" class="custom-modal">
                        <div class="modal-content">
                            <span class="close">&times;</span>
                            <div id="userInfo"></div>
                        </div>
                    </div>
                    <!-- Body: Header -->
                    <div class="header">
                        <nav class="navbar py-4">
                            <div class="container-xxl">
                                <!-- header rightbar icon -->
                                <div class="h-right d-flex align-items-center mr-5 mr-lg-0 order-1">
                                    <div class="d-flex">
                                        <div class="avatar-list avatar-list-stacked px-3">
                                        </div>
                                    </div>
                                    <div class="dropdown notifications zindex-popover">
                                        <a class="nav-link dropdown-toggle pulse" href="#" role="button" data-bs-toggle="dropdown" onclick="hideNotificationCount()">
                                            <span class="icon-container">
                                                <i class="icofont-alarm fs-5"></i>
                                                <span class="notification-count">16</span>
                                            </span>
                                            <span class="pulse-ring"></span>
                                        </a>
                                        <div id="NotificationsDiv" class="dropdown-menu rounded-lg shadow border-0 dropdown-animation dropdown-menu-sm-end p-0 m-0">
                                            <div class="card border-0 w380">
                                                <div class="card-header border-0 p-3">
                                                    <h5 class="mb-0 font-weight-light d-flex justify-content-between">
                                                        <span>Notifications</span>
                                                        <span class="badge text-white">11</span>
                                                    </h5>
                                                </div>
                                                <div class="tab-content card-body">
                                                    <div class="tab-pane fade show active">
                                                        <ul class="list-unstyled list mb-0">
                                                            <li class="py-2 mb-1 border-bottom">
                                                                <a href="javascript:void(0);" class="d-flex">
                                                                    <img class="avatar rounded-circle" src="assets/images/xs/avatar1.jpg" alt="">
                                                                    <div class="flex-fill ms-2">
                                                                        <p class="d-flex justify-content-between mb-0 "><span class="font-weight-bold">Dylan Hunter</span> <small>2MIN</small></p>
                                                                        <span class="">Added  2021-02-19 my-Task ui/ux Design <span class="badge bg-success">Review</span></span>
                                                                    </div>
                                                                </a>
                                                            </li>
                                                            <li class="py-2 mb-1 border-bottom">
                                                                <a href="javascript:void(0);" class="d-flex">
                                                                    <div class="avatar rounded-circle no-thumbnail">DF</div>
                                                                    <div class="flex-fill ms-2">
                                                                        <p class="d-flex justify-content-between mb-0 "><span class="font-weight-bold">Diane Fisher</span> <small>13MIN</small></p>
                                                                        <span class="">Task added Get Started with Fast Cad project</span>
                                                                    </div>
                                                                </a>
                                                            </li>
                                                            <li class="py-2 mb-1 border-bottom">
                                                                <a href="javascript:void(0);" class="d-flex">
                                                                    <img class="avatar rounded-circle" src="assets/images/xs/avatar3.jpg" alt="">
                                                                    <div class="flex-fill ms-2">
                                                                        <p class="d-flex justify-content-between mb-0 "><span class="font-weight-bold">Andrea Gill</span> <small>1HR</small></p>
                                                                        <span class="">Quality Assurance Task Completed</span>
                                                                    </div>
                                                                </a>
                                                            </li>
                                                            <li class="py-2 mb-1 border-bottom">
                                                                <a href="javascript:void(0);" class="d-flex">
                                                                    <img class="avatar rounded-circle" src="assets/images/xs/avatar5.jpg" alt="">
                                                                    <div class="flex-fill ms-2">
                                                                        <p class="d-flex justify-content-between mb-0 "><span class="font-weight-bold">Diane Fisher</span> <small>13MIN</small></p>
                                                                        <span class="">Add New Project for App Developemnt</span>
                                                                    </div>
                                                                </a>
                                                            </li>
                                                            <li class="py-2 mb-1 border-bottom">
                                                                <a href="javascript:void(0);" class="d-flex">
                                                                    <img class="avatar rounded-circle" src="assets/images/xs/avatar6.jpg" alt="">
                                                                    <div class="flex-fill ms-2">
                                                                        <p class="d-flex justify-content-between mb-0 "><span class="font-weight-bold">Andrea Gill</span> <small>1HR</small></p>
                                                                        <span class="">Add Timesheet For Rhinestone project</span>
                                                                    </div>
                                                                </a>
                                                            </li>
                                                            <li class="py-2">
                                                                <a href="javascript:void(0);" class="d-flex">
                                                                    <img class="avatar rounded-circle" src="assets/images/xs/avatar7.jpg" alt="">
                                                                    <div class="flex-fill ms-2">
                                                                        <p class="d-flex justify-content-between mb-0 "><span class="font-weight-bold">Zoe Wright</span> <small class="">1DAY</small></p>
                                                                        <span class="">Add Calander Event</span>
                                                                    </div>
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <a class="card-footer text-center border-top-0" href="#"> View all notifications</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="dropdown user-profile ml-2 ml-sm-3 d-flex align-items-center zindex-popover">
                                        @if (SignInManager.IsSignedIn(User))
                                        {
                                            @if (User.Identity.IsAuthenticated)
                                            {
                                                var user = await UserManager.GetUserAsync(User);
                                                var userRoles = await UserManager.GetRolesAsync(user);
                                                var rolesAsString = string.Join(", ", userRoles);
                                                if (user != null)
                                                {
                                                    <div class="u-info me-2">
                                                        <p class="mb-0 text-end line-height-sm "><span class="font-weight-bold">@user.FirstName @user.LastName</span></p>
                                                        <small>@rolesAsString</small>
                                                    </div>
                                                    <a class="nav-link dropdown-toggle pulse p-0" href="#" role="button" data-bs-toggle="dropdown" data-bs-display="static">
                                                        <img class="avatar lg rounded-circle img-thumbnail" src="@avatarUrl" alt="profile">
                                                    </a>
                                                    <div class="dropdown-menu rounded-lg shadow border-0 dropdown-animation dropdown-menu-end p-0 m-0">
                                                        <div class="card border-0 w280">
                                                            <div class="card-body pb-0">
                                                                <div class="d-flex py-1">
                                                                    <img class="avatar rounded-circle" src="@avatarUrl" alt="profile">
                                                                    <div class="flex-fill ms-3">
                                                                        <p class="mb-0"><span class="font-weight-bold">@user.FirstName @user.LastName</span></p>
                                                                        <small class="">@user.UserName</small>
                                                                    </div>
                                                                </div>
                                                                <div><hr class="dropdown-divider border-dark"></div>
                                                            </div>
                                                            <div class="list-group m-2 ">
                                                                <a style="outline:none;" asp-area="Identity" asp-page="/Account/Manage/Index" type="submit" class="list-group-item list-group-item-action border-0 "><i class="icofont-info-circle fs-6 me-3"><span style="font-size:15px;font-family:Arial;margin-left:15px">Thông tin của tôi</span></i></a>

                                                                <a style="outline:none;" asp-area="Identity" asp-page="/Account/Manage/ChangePassword" type="submit" class="list-group-item list-group-item-action border-0 "><i class="icofont-key fs-6 me-3"><span style="font-size:15px;font-family:Arial;margin-left:15px">Đổi mật khẩu</span></i></a>

                                                                <a style="outline:none;" asp-area="" asp-controller="Home" asp-action="Index" type="submit" class="list-group-item list-group-item-action border-0 "><i class="icofont-ui-home fs-6 me-3"><span style="font-size:15px;font-family:Arial;margin-left:15px">Về trang chủ</span></i></a>
                                                                <form id="logoutForm" class="form-inline" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
                                                                    <button style="outline:none;" type="submit" class="list-group-item list-group-item-action border-0 "><i class="icofont-logout fs-6 me-3"><span style="font-size:15px;font-family:Arial;margin-left:15px">Đăng xuất</span></i></button>
                                                                </form>
                                                                <div><hr class="dropdown-divider border-dark"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }
                                            }
                                        }
                                        else
                                        {
                                            var defaultAvatarUrl = "https://i.pinimg.com/236x/e1/6c/70/e16c704fc0b655e553dd7a1a8a00475d.jpg"; // Đường dẫn đến ảnh mặc định
                                            var adminUsername = "admin";

                                            <div class="u-info me-2">
                                                <p class="mb-0 text-end line-height-sm "><span class="font-weight-bold">@adminUsername</span></p>
                                                <small>user</small>
                                            </div>
                                            <a class="nav-link dropdown-toggle pulse p-0" href="#" role="button" data-bs-toggle="dropdown" data-bs-display="static">
                                                <img class="avatar lg rounded-circle img-thumbnail" src="@defaultAvatarUrl" alt="profile">
                                            </a>
                                            <div class="dropdown-menu rounded-lg shadow border-0 dropdown-animation dropdown-menu-end p-0 m-0">
                                                <div class="card border-0 w280">
                                                    <div class="card-body pb-0">
                                                        <div class="d-flex py-1">
                                                            <img class="avatar rounded-circle" src="@avatarUrl" alt="profile">
                                                            <div class="flex-fill ms-3">
                                                                <p class="mb-0"><span class="font-weight-bold">user</span></p>
                                                                <small class="">user</small>
                                                            </div>
                                                        </div>
                                                        <div><hr class="dropdown-divider border-dark"></div>
                                                    </div>
                                                    <div class="list-group m-2 ">
                                                        <a style="outline:none;" asp-area="" asp-controller="Home" asp-action="Index" type="submit" class="list-group-item list-group-item-action border-0 "><i class="icofont-ui-home fs-6 me-3"><span style="font-size:15px;font-family:Arial;margin-left:15px">Về trang chủ</span></i></a>
                                                        <form id="logoutForm" class="form-inline" asp-area="Identity" asp-page="/Account/Login" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
                                                            <button style="outline:none;" type="submit" class="list-group-item list-group-item-action border-0 "><i class="icofont-login fs-6 me-3"><span style="font-size:15px;font-family:Arial;margin-left:15px">Đăng nhập</span></i></button>
                                                        </form>
                                                        <div><hr class="dropdown-divider border-dark"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                    </div>
                                </div>

                                <!-- menu toggler -->
                                <button class="navbar-toggler p-0 border-0 menu-toggle order-3" type="button" data-bs-toggle="collapse" data-bs-target="#mainHeader">
                                    <span class="fa fa-bars"></span>
                                </button>


                                <!-- main menu Search-->
                                <div class="col-lg-4 col-md-6 col-sm-8 col-xs-12">
                                    <div class="form">
                                        <i class="fa fa-search"></i>
                                        <input type="text" class="form-control form-input" placeholder="Tìm kiếm...">
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                </div>
                @RenderBody()



            </div>
        </div>
        <script src="_content/MudBlazor/MudBlazor.min.js"></script>

        <base href="~/" />
        <script src="_framework/blazor.server.js"></script>
        <script src="_content/Microsoft.AspNetCore.Components.Web.Extensions/script.js"></script>

        <script type="text/javascript">
            // Khởi tạo biến
            let isClicked = localStorage.getItem('isClicked') === 'true';

            function hideNotificationCount() {
                // Cập nhật trạng thái
                isClicked = true;
                localStorage.setItem('isClicked', 'true');

                // Ẩn notification-count
                const notificationCount = document.querySelector('.notification-count');
                notificationCount.style.visibility = 'hidden';

            }

            // Hiển thị notification-count dựa trên trạng thái
            const notificationCount = document.querySelector('.notification-count');
            if (isClicked) {
                notificationCount.style.visibility = 'hidden';
            } else {
                notificationCount.style.visibility = 'visible';
            }

            // function getRandomImageUrl(width, height) {
            //     return `https://picsum.photos/${width}/${height}?random=${Math.floor(Math.random() * 1000)}`;
            // }
            // var numberOfImages = 3;
            // var avatarList = document.querySelector('.avatar-list');

            // for (var i = 0; i < numberOfImages; i++) {
            //     var img = document.createElement('img');
            //     img.classList.add('avatar', 'rounded-circle');
            //     img.src = getRandomImageUrl(50, 50);
            //     img.alt = 'Avatar';
            //     avatarList.appendChild(img);
            // }


            (function () {
                var s1 = document.createElement("script"), s0 = document.getElementsByTagName("script")[0];
                s1.async = true;
                s1.src = 'https://embed.tawk.to/654a847da84dd54dc489870d/1helhb2rj';
                s1.charset = 'UTF-8';
                s1.setAttribute('crossorigin', '*');
                s0.parentNode.insertBefore(s1, s0);
            })();

        </script>
        @* signalR *@
        <script src="~/lib/microsoft/signalr/dist/browser/signalr.js"></script>
        <script src="~/lib/microsoft/signalr/dist/browser/signalr.min.js"></script>
        <a href="~/lib/microsoft/signalr/dist/browser/signalr.min.js.map"></a>


        <script src="~/admin_assets/bundles/libscripts.bundle.js"></script>
        <script src="~/admin_assets/bundles/apexcharts.bundle.js"></script>
        <script src="~/admin_assets/page/hr.js"></script>
        <script src="~/admin_assets/template.js"></script>
        <script src="~/js/qrcode.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.min.js" integrity="sha512-7U4rRB8aGAHGVad3u2jiC7GA5/1YhQcQjxKeaVms/bT66i3LVBMRcBI9KwABNWnxOSwulkuSXxZLGuyfvo7V1A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="~/js/site.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js" integrity="sha512-VEd+nq25CkR676O+pLBnDW09R7VQX9Mdiij052gVCp5yVH3jGtH70Ho/UUv4mJDsEdTvqRCFZg0NKGiojGnUCw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

        @* ajax *@
        @await RenderSectionAsync("Scripts", required: false)

        @await Component.InvokeAsync("Notyf")
        <script>
            window.addEventListener("load", function () {
                var spinner = document.getElementById("loading-spinner");
                setTimeout(function () {
                    spinner.style.display = "none";
                }, 10);
            });
        </script>
</body>

</html> 